<h1>CADASTRO</h1>
<form #cadastroForm="ngForm" (submit)="onSubmit(cadastroForm)">

    <div>
        <label for="primeiroNome">Primeiro Nome: </label>
        <input
            type="text"
            id="primeiroNome"
            name="primeiroNome"
            [(ngModel)]="novoCadastro.primeiroNome"
            required #nomeInput="ngModel">
            @if (nomeInput.invalid && (nomeInput.dirty || nomeInput.touched) && nomeInput.errors?.['required']) {
                <div>
                    O primeiro nome é obrigatório
                </div>
            }
    </div>

    <div>
        <label for="sobrenome">Sobrenome: </label>
        <input 
            type="text" 
            id="sobrenome"
            name="sobrenome"
            [(ngModel)]="novoCadastro.sobrenome"
            required #sobrenomeInput="ngModel">
            @if (sobrenomeInput.invalid && (sobrenomeInput.dirty || sobrenomeInput.touched) && sobrenomeInput.errors?.['required']) {
                <div>
                    O sobrenome é obrigatório
                </div>
            }
    </div>

    <div>
        <label for="email: ">Email: </label>
        <input 
            type="email" 
            id="email"
            name="email"
            [(ngModel)]="novoCadastro.email"
            required email #emailInput="ngModel">
            @if (emailInput.invalid && (emailInput.dirty || emailInput.touched)) {
                <div>
                    @if (emailInput.errors?.['required']) {
                        O e-mail é obrigatório.
                    }
                    @if (emailInput.errors?.['email']) {
                        O e-mail é inválido.
                    }
                </div>
            }
    </div>

    <div>
        <label for="telefone">Telefone: </label>
        <input 
            type="text" 
            id="telefone"
            name="telefone"
            [(ngModel)]="novoCadastro.telefone"
            required
            pattern="^\d{11}$"
            #telefoneInput="ngModel">
            <div>
                @if (telefoneInput.invalid && (telefoneInput.dirty || telefoneInput.touched)) {
                    @if (telefoneInput.errors?.['required']) {
                        O campo telefone é obrigatório.
                    }
                    @if (telefoneInput.errors?.['pattern']) {
                        Telefone inválido.
                    }
                }
            </div>
    </div>

    <div>
        <label for="dataNascimento">Data de Nascimento: </label>
        <input 
            type="date" 
            id="dataNascimento"
            name="dataNascimento"
            [(ngModel)]="novoCadastro.dataNascimento"
            required
            [max]="today"
            #dataInput="ngModel">
            @if (dataInput.invalid && (dataInput.dirty || dataInput.touched)) {
                <div>
                    @if (dataInput.errors?.['required']) {
                        A data de nascimento é obrigatória.
                    }
                    @if (dataInput.errors?.['max']) {
                        A data de nascimento não pode ser no futuro.
                    }
                </div>
            }
    </div>

    <div>
        <label for="senha">Senha: </label>
        <input 
            type="password" 
            id="senha"
            name="senha"
            [(ngModel)]="novoCadastro.senha"
            required
            minlength="12"
            #senhaInput="ngModel">
            @if (senhaInput.invalid && (senhaInput.dirty || senhaInput.touched)) {
                <div>
                    @if (senhaInput.errors?.['required']) {
                        O campo "senha" é obrigatório.
                    }
                    @if (senhaInput.errors?.['minlength']) {
                        A senha deve ter no mínimo 12 caracteres. Você digitou {{novoCadastro.senha.length}}.
                    }
                </div>
            }
    </div>

    <button type="submit" [disabled]="cadastroForm.invalid">Cadastrar</button>
</form>