<div class="flex flex-col w-full gap-2 p-8 border border-dashed border-purple-600">

    <label for="questionDescription">Sua pergunta:</label>

    <!-- Campo de digitação da pergunta -->
    <input type="text" id="questionDescription" placeholder="qual sua pergunta?" class=" w-full 
    border-b-2 border-blue-600 
    focus:border-2 
    my-2 py-1 px-2 outline-none 
    placeholder-gray-300 
    text-lg text-gray-800" [value]="question.title" (input)="question.title = $any($event.target).value">

    <!-- Opções que o usuário ira colocar a depender da pergunta -->

    @switch (question.type) {
    @case ('multipla escolha') {

    <section class="flex flex-col mb-8" cdkDropList (cdkDropListDropped)="drop($event)">

        @for (option of question.options; track $index) {

        <div class="flex flex-row items-center gap-4" cdkDrag>

            <div *cdkDragPlaceholder class="opacity-0"></div>

            <div class="cursor-move" cdkDragHandle>
                <i class="fa-solid fa-grip-vertical text-gray-400 hover:text-gray-600"></i>
            </div>

            <app-option-item [option]="option" [index]="$index" [quantOptions]="this.question.options.length"
                [questionType]="this.question.type" (optionChange)="question.options![$index] = $event"
                (remove)="formBuilderService.removeOption(this.question.id, $index)"></app-option-item>

        </div>

        }

        <div class="flex flex-row items-center gap-2 px-7 mt-6">
            <div class="w-5 h-5 rounded-full border border-dashed cursor-pointer"></div>
            <button
                class="text-gray-300 py-0.5 px-2 text-sm border-b border-dashed border-gray-300 hover:border-blue-600 hover:border-b-2 cursor-text"
                (click)="formBuilderService.addOption(question.id)">
                Adicionar opção
            </button>
        </div>

    </section>

    }
    @case ('caixas de seleção') {

    <section class="flex flex-col mb-8" cdkDropList (cdkDropListDropped)="drop($event)">

        @for (option of question.options; track $index) {

        <div class="flex flex-row items-center gap-4" cdkDrag>

            <div *cdkDragPlaceholder class="opacity-0"></div>

            <div class="cursor-move" cdkDragHandle>
                <i class="fa-solid fa-grip-vertical text-gray-400 hover:text-gray-600"></i>
            </div>

            <app-option-item [option]="option" [index]="$index" [quantOptions]="this.question.options.length"
                [questionType]="this.question.type" (optionChange)="question.options![$index] = $event"
                (remove)="formBuilderService.removeOption(this.question.id, $index)"></app-option-item>

        </div>

        }

        <div class="flex flex-row items-center gap-2 px-7 mt-6">
            <div class="w-5 h-5 rounded border border-dashed cursor-pointer"></div>
            <button
                class="text-gray-300 py-0.5 px-2 text-sm border-b border-dashed border-gray-300 hover:border-blue-600 hover:border-b-2 cursor-text"
                (click)="formBuilderService.addOption(question.id)">
                Adicionar opção
            </button>
        </div>

    </section>

    }
    @case ('data') {
        
    }
    }

    <div class="flex flex-row items-end justify-between">

        <div class="flex flex-col gap-4">

            <app-ui-select [options]="questionTypes" [(value)]="question.type"></app-ui-select>
            <app-ui-toggle [(value)]="question.required"></app-ui-toggle>

        </div>


        <app-delete-component (delete)="formBuilderService.removeQuestion(question.id)"
            [quantQuestions]="formBuilderService.questions().length"></app-delete-component>

    </div>
</div>